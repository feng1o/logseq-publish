file:: [RDMA原理分析、对比和技术实现解析_1703818792670_0.pdf](../assets/RDMA原理分析、对比和技术实现解析_1703818792670_0.pdf)
file-path:: ../assets/RDMA原理分析、对比和技术实现解析_1703818792670_0.pdf
alias:: rdma

- ##### 第一章: [[RDMA]] 背景简介
  hl-page:: 5
  ls-type:: annotation
  id:: 658e38cb-3a38-4a53-9b94-edd11715bc8a
  hl-color:: red
  background-color:: green
	- 传统的 TCP/IP 技术在数据包处理过程中，要经过操作系统及其他软件层，需要占用大量的服务器资源和内存总线带宽，数据在系统内存、处理器缓存和网络控制器缓存之间来回进行复制移动，给服务器的 CPU 和内存造成了沉重负担
	  ls-type:: annotation
	  hl-page:: 5
	  hl-color:: green
	  id:: 658e38eb-ee5c-4810-8dd8-4d69bf34befe
	- 1.1 RDMA 技术背景
	  ls-type:: annotation
	  hl-page:: 5
	  hl-color:: blue
	  id:: 658e38f9-230e-46cc-889b-dbdcca916c47
		- RDMA 技术最早出现在 Infiniband 网络，用于 HPC 高性能计算集群的互联。传统的基于 socket 套接字（TCP/IP 协议栈）的网络通信，需要经过操作系统软件协议栈，数据在系统 DRAM、处理器 CACHE和网卡 buffer 之间来回拷贝搬移，因此占用了大量的 CPU 计算资源和内存总线带宽，也加大了网络延时。举例来说，40Gbps 的 TCP 流，能耗尽主流服务器的所有 CPU 资源。RDMA 解决了传统 TCP/IP 通信的技术痛点：40Gbps 场景下，CPU 占用率从 100%下降到 5%，网络延时从 ms 级降低到 10us 以下。
		  ls-type:: annotation
		  hl-page:: 5
		  hl-color:: green
		  id:: 658e391c-53e3-4da7-8920-17829aca503a
		- RDMA 是一种新的内存访问技术，RDMA 让计算机可以直接存取其他计算机的内存，而不需要经过处理器耗时的处理。RDMA 将数据从一个系统快速移动到远程系统存储器中，而不对操作系统造成任何影响。
		  ls-type:: annotation
		  hl-page:: 6
		  hl-color:: purple
		  id:: 658e3933-6a4b-4999-adba-a74c4a952540
		- 如下图所示，应用程序不需要参与数据传输过程，只需要指定内存读写地址，开启传输并等待传输完成即可。
		  ls-type:: annotation
		  hl-page:: 6
		  hl-color:: red
		  id:: 658e3969-fba3-4362-8fea-a43eecd74174
- ##### 第2章 哪些网络协议支持 RDMA
  ls-type:: annotation
  hl-page:: 8
  hl-color:: red
  id:: 658e39ba-9668-45b6-9262-4c15d83640d9
  background-color:: purple
- 第3章 RDMA 技术优势
  ls-type:: annotation
  hl-page:: 9
  hl-color:: red
  id:: 658e39d0-467f-4850-a14e-859d06b38e4f
	- 在实现上，RDMA 实际上是一种智能网卡与软件架构充分优化的远端内存直接高速访问技术，通过在[[#red]]==网卡上将 RDMA 协议固化于硬件，以及支持零复制网络技术和内核内存旁路技术这两种途径来达到其高性能的远程直接数据存取==的目标
	  ls-type:: annotation
	  hl-page:: 9
	  hl-color:: blue
	  id:: 658e39ee-5e71-4f0a-a6bb-eb3e98285b79
	- 1）零复制
	  ls-type:: annotation
	  hl-page:: 9
	  hl-color:: green
	  id:: 658e3a4e-b484-4360-b635-db395d50a856
	- 2）内核旁路
	  ls-type:: annotation
	  hl-page:: 9
	  hl-color:: green
	  id:: 658e3a55-7f1b-40a0-8de9-915f2c327bbc
	- 3）没有 CPU 参与
	  ls-type:: annotation
	  hl-page:: 9
	  hl-color:: green
	  id:: 658e3a61-7028-4566-ab70-7e0c231de082
	- 4）基于消息的事务
	  ls-type:: annotation
	  hl-page:: 9
	  hl-color:: green
	  id:: 658e3a66-19bf-44f7-9f50-6775641d6e79
	- 5）分散/收集条目支持
	  ls-type:: annotation
	  hl-page:: 9
	  hl-color:: green
	  id:: 658e3a78-906b-4eb7-8319-271103f0b455
		- 在具体的远程内存读写中，RDMA 操作用于读写操作的远程虚拟内存地址包含在 RDMA 消息中传送，远程应用程序要做的只是在其本地网卡中注册相应的内存缓冲区。远程节点的 CPU 除在连接建立、注册调用等之外，在整个 RDMA 数据传输过程中并不提供服务，因此没有带来任何负载
		  ls-type:: annotation
		  hl-page:: 10
		  hl-color:: purple
		  id:: 658e3ab6-1338-4c5d-a87e-0cf4c1e01861
- 第4章 RDMA 有哪些不同实现
  ls-type:: annotation
  hl-page:: 10
  hl-color:: red
  id:: 658e3ac1-c452-44dd-9b77-967cdff1d614
- RDMA 最早在 Infiniband 传输网络上实现，技术先进，但是价格高昂；后面移到了Ethernet上
  hl-page:: 10
  ls-type:: annotation
  id:: 658e4007-0ab6-49b3-be36-64766bbc0c5a
  hl-color:: green
- 在 Ethernet 以太网上，根据协议栈融合度的差异，分为 iWARP 和 [[RoCE]] 两种技术，而 RoCE 又包括 RoCEv1 和 RoCEv2 两个版本（RoCEv2 的最大改进是支持 IP 路由）
  hl-page:: 10
  ls-type:: annotation
  id:: 65bc9719-e278-44da-9094-ebe26d05dcbe
  hl-color:: red
-
- RoCEv2 的协议栈包括 IB 传输层、 TCP/UDP、IP 和 Ethernet
  ls-type:: annotation
  hl-page:: 11
  hl-color:: green
  id:: 65bc9789-804e-42e6-98d4-564d19d16b71