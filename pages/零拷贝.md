- [[DMA]]技术  [[零拷贝]]  [#-](https://www.cnblogs.com/xiaolincoding/p/13719610.html) <a class="pin"></a>    [#](https://zhuanlan.zhihu.com/p/83398714) #interview #card
  card-last-score:: 3
  card-repeats:: 2
  card-next-schedule:: 2023-07-25T05:07:35.516Z
  card-last-interval:: 4
  card-ease-factor:: 2.22
  card-last-reviewed:: 2023-07-21T05:07:35.516Z
	- > 一种在数据传输过程中减少数据拷贝的方法，通过避免在用户空间和内核空间之间复制数据
	- ![image.png](../assets/image_1679042686357_0.png){:height 246, :width 806}
- [[DMA]] #interview #card
  card-last-interval:: 4
  card-repeats:: 2
  card-ease-factor:: 2.22
  card-next-schedule:: 2024-01-27T14:22:47.039Z
  card-last-reviewed:: 2024-01-23T14:22:47.039Z
  card-last-score:: 3
	- 用户进程调用 read 方法，向操作系统发出 I/O 请求，请求读取数据到自己的内存缓冲区中，进程进入阻塞状态；
	- 操作系统收到请求后，进一步将 I/O 请求发送 DMA，然后让 CPU 执行其他任务；
	- DMA 进一步将 I/O 请求发送给磁盘；
	- 磁盘收到 DMA 的 I/O 请求，把数据从磁盘读取到磁盘控制器的缓冲区中，当磁盘控制器的缓冲区被读满后，向 DMA 发起中断信号，告知自己缓冲区已满；
	- **DMA 收到磁盘的信号，将磁盘控制器缓冲区中的数据拷贝到内核缓冲区中，此时不占用 CPU，CPU 可以执行其他任务**；
	- 当 DMA 读取了足够多的数据，就会发送中断信号给 CPU；
	- CPU 收到 [[DMA]] 的信号，知道数据已经准备好，于是将数据从内核拷贝到用户空间，系统调用返回；
	- > 整个数据传输的过程，CPU 不再参与数据搬运的工作，而是全程由 DMA 完成，但是 CPU 在这个过程中也是必不可少的，因为传输什么数据，从哪里传输到哪里，都需要 CPU 来告诉 DMA 控制器
- [[零拷贝]]技术实现的方式通常有 2 种： #interview #card
  card-last-interval:: 4
  card-repeats:: 2
  card-ease-factor:: 2.22
  card-next-schedule:: 2024-01-19T11:44:34.007Z
  card-last-reviewed:: 2024-01-15T11:44:34.007Z
  card-last-score:: 3
	- mmap + write
	- sendfile